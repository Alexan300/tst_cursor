# Инструкция по использованию алгоритма Томсона

## Основные улучшения

### 1. Устранение плавающей изолинии
- Добавлен фильтр высоких частот (0.5 Гц)
- Автоматически применяется ко всем сигналам
- Улучшает качество детекции пиков

### 2. Улучшенная детекция пиков
- Более строгие условия поиска локальных максимумов
- Использование перцентиля вместо максимума для порога
- Адаптивные пороги с учетом чувствительности

### 3. Оптимизация производительности
- Отключен автоматический пересчет при изменении слайдеров
- Добавлен чекбокс "Автопересчет" для контроля
- Кнопка "Обновить" для ручного пересчета

### 4. Обработка больших файлов
- Последовательная обработка чанками (10 секунд)
- Перекрытие чанков (2 секунды) для избежания потери пиков
- Прогресс-бар с отображением процента выполнения
- Экономия памяти при работе с большими файлами

## Рекомендации по настройке

### Для начала работы:
1. Загрузите файл ЭКГ
2. Установите чувствительность = 1.0
3. Нажмите "Обновить" для первичной обработки

### Если пики не детектируются:
1. Увеличьте чувствительность до 1.5-2.0
2. Уменьшите минимальное расстояние между пиками до 150-180 мс
3. Увеличьте окно интегрирования до 150-180 мс

### Если много ложных срабатываний:
1. Уменьшите чувствительность до 0.5-0.8
2. Увеличите минимальное расстояние между пиками до 250-300 мс
3. Уменьшите окно интегрирования до 80-100 мс

### Для больших файлов:
1. Используйте кнопку "Полная обработка"
2. Дождитесь завершения обработки
3. Результаты будут применены ко всему файлу

## Параметры алгоритма

- **Чувствительность (0.1-2.0)**: Основной параметр контроля детекции
- **Мин. RR (100-500 мс)**: Минимальный интервал между пиками
- **Окно интегрирования (50-200 мс)**: Размер окна сглаживания
- **Окно поиска (20-100 мс)**: Точность позиционирования пиков

## Сохранение настроек

После настройки параметров сохраните их:
- Файл → Сохранить параметры...
- Выберите место сохранения .json файла
- Для загрузки: Файл → Загрузить параметры... 